!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("video.js"),require("videojs-contrib-ads")):"function"==typeof define&&define.amd?define(["video.js","videojs-contrib-ads"],t):t((e=e||self).videojs)}(this,(function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,n);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(i):void 0},a=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},r=e.getComponent("RemainingTimeDisplay"),d=e.getComponent("TimeDisplay"),l=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),i(t,[{key:"createEl",value:function(){return d.prototype.createEl.call(this)}},{key:"updateTextNode_",value:function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=document.createTextNode(this.getRemainingTimeLabel()+(this.formattedTime_||"-0:00").replace("-","")),this.contentEl_.appendChild(this.textNode_)}}},{key:"getRemainingTimeLabel",value:function(){var e=": ";return this.player_.totalAds>1&&(e=" ("+this.player_.adPosition+" "+this.options_.ofLabel+" "+this.player_.totalAds+"): "),this.options_.adLabel+e}}]),t}(r);e.registerComponent("imaRemainingTimeDisplay",l);var h=function(r){function d(e,t){n(this,d);var i=o(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,e,t));return i.contentTracker={previousTime:0,currentTime:0,duration:0,seeking:!1},i.currentAd=null,i.source=e.source,i.adDisplayContainer=null,i.adsLoader=null,i.adsManager=null,i.width=0,i.heght=0,i.screenMode="",i.volume_=1,i.muted_=!1,i}return a(d,r),i(d,[{key:"mergeWithDefaults",value:function(t){var n=google.ima.settings;return Object.assign({showControlsForJSAds:!0,locale:n.getLocale(),disableFlashAds:n.getDisableFlashAds(),disableCustomPlaybackForIOS10Plus:e.browser.IS_IOS,numRedirects:n.getNumRedirects(),autoPlayAdBreaks:!0,vpaidMode:google.ima.ImaSdkSettings.VpaidMode.ENABLED,adTagUrl:"",adsResponse:"",forceNonLinearFullSlot:!1,nonLinearWidth:0,nonLinearHeight:0,adWillAutoPlay:!1,adWillPlayMuted:!1,showCountdown:!0,adsRenderingSettings:{loadVideoTimeout:t.timeout||5e3}},t)}},{key:"createEl",value:function(){var e=document.createElement("div");return e.className="vjs-tech ima-ad-container",e.id=this.options_.playerId+"-ad-container",e}},{key:"controls",value:function(){return!1}},{key:"poster",value:function(){return null}},{key:"setPoster",value:function(){}},{key:"src",value:function(e){return this.setSource(e),this.source}},{key:"currentSrc",value:function(){return this.source.adTagUrl||this.source.adsResponse||""}},{key:"setSource",value:function(e,n){if(e&&"object"===(void 0===e?"undefined":t(e))){if(this.source=this.mergeWithDefaults(e),n||this.reset(),this.trigger("loadstart"),!this.source.adTagUrl&&!this.source.adsResponse)return n&&this.triggerReady(),void this.trigger("adsready");this.isReady_=!1,this.trigger("waiting"),this.initAdContainer(),this.requestAds()}}},{key:"autoplay",value:function(){return this.source&&this.source.autoPlayAdBreaks}},{key:"setAutoplay",value:function(){}},{key:"loop",value:function(){return!1}},{key:"setLoop",value:function(){}},{key:"play",value:function(){this.isReady_?this.adsManager&&!this.ended()?this.contentHasStarted_?this.isLinearAd()&&this.paused()?this.adsManager.resume():this.hasStarted_&&this.autoplay()||this.start():console.warn("Ads warning: content must be playing."):console.warn("Ads warning: No ads."):console.warn("Ads warning: ads not ready to play yet.")}},{key:"pause",value:function(){this.isLinearAd()&&!this.paused()&&this.adsManager.pause()}},{key:"paused",value:function(){return!!this.paused_}},{key:"currentTime",value:function(){var e=this.adsManager?this.duration()-this.adsManager.getRemainingTime():0;return e>0?e:0}},{key:"setCurrentTime",value:function(){}},{key:"seeking",value:function(){return!1}},{key:"seekable",value:function(){return e.createTimeRange()}},{key:"playbackRate",value:function(){return 1}},{key:"duration",value:function(){return this.currentAd&&this.currentAd.getDuration()>0?this.currentAd.getDuration():0}},{key:"ended",value:function(){return!!this.ended_}},{key:"volume",value:function(){return this.adsManager?this.adsManager.getVolume():this.volume_}},{key:"setVolume",value:function(e){e!==this.volume_&&this.adsManager&&this.adsManager.setVolume(e)}},{key:"muted",value:function(){return this.adsManager?!this.adsManager.getVolume():this.muted_}},{key:"setMuted",value:function(e){e!=this.muted_&&this.adsManager&&this.adsManager.setVolume(e?0:this.volume_)}},{key:"buffered",value:function(){return e.createTimeRange(0,this.currentTime())}},{key:"supportsFullScreen",value:function(){return!0}},{key:"preload",value:function(){}},{key:"load",value:function(){}},{key:"reset",value:function(){this.adsManager&&(this.adsManager.stop(),this.adsManager.destroy(),this.adsManager=null),this.contentCompleted_||this.onContentCompleted(),this.err=null,this.currentAd=null,this.muted_=!1,this.ended_=!1,this.paused_=!1,this.contentTracker.previousTime=0,this.contentTracker.currentTime=0,this.contentTracker.duration=0,this.contentTracker.seeking=!1,this.adsLoader&&this.adsLoader.destroy(),this.adsLoader=null,this.adDisplayContainer&&this.adDisplayContainer.destroy(),this.adDisplayContainer=null}},{key:"dispose",value:function(){this.reset(!0),this.player_=null,s(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"dispose",this).call(this)}},{key:"handleLateInit_",value:function(e){this.player_=e.imaPlayer,this.source.contentMediaElement=e.mediaElement,this.source.adWillAutoPlay=e.autoplay,this.source.adWillPlayMuted=e.muted,this.muted_=e.muted,this.volume_=e.volume,this.resize(e),this.setSource(this.source,!0)}},{key:"initAdContainer",value:function(){this.adDisplayContainer=new google.ima.AdDisplayContainer(this.el_,this.source.contentMediaElement),this.setAdsLoader()}},{key:"setScreenMode",value:function(e){this.screenMode=e?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL}},{key:"setAdsLoader",value:function(){this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setLocale(this.source.locale),this.adsLoader.getSettings().setDisableFlashAds(this.source.disableFlashAds),this.adsLoader.getSettings().setDisableCustomPlaybackForIOS10Plus(this.source.disableCustomPlaybackForIOS10Plus),this.adsLoader.getSettings().setVpaidMode(this.source.vpaidMode),this.adsLoader.getSettings().setNumRedirects(this.source.numRedirects),this.adsLoader.getSettings().setPlayerType("videojs-ima-player"),this.adsLoader.getSettings().setPlayerVersion("0.5.3"),this.adsLoader.getSettings().setAutoPlayAdBreaks(this.source.autoPlayAdBreaks),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdEvent.bind(this,this.onAdsManagerLoaded),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdEvent.bind(this,this.onAdsLoaderError),!1)}},{key:"requestAds",value:function(){if(this.source.adTagUrl||this.source.adsResponse){var e=new google.ima.AdsRequest;this.source.adTagUrl?e.adTagUrl=this.source.adTagUrl:e.adsResponse=this.source.adsResponse,e.forceNonLinearFullSlot=this.source.forceNonLinearFullSlot,e.linearAdSlotWidth=this.width,e.linearAdSlotHeight=this.height,e.nonLinearAdSlotWidth=this.source.nonLinearWidth||e.linearAdSlotWidth,e.nonLinearAdSlotHeight=this.source.nonLinearHeight||e.linearAdSlotHeight/3,e.setAdWillAutoPlay(this.source.adWillAutoPlay),e.setAdWillPlayMuted(this.source.adWillPlayMuted),this.adsLoader.requestAds(e)}}},{key:"setAdsManager",value:function(e){this.adsRenderingSettings=new google.ima.AdsRenderingSettings,Object.assign(this.adsRenderingSettings,this.source.adsRenderingSettings||{}),this.adsManager=e.getAdsManager(this.contentTracker,this.adsRenderingSettings),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdEvent.bind(this,this.onAdError)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onAdEvent.bind(this,this.onContentPauseRequested)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onAdEvent.bind(this,this.onContentResumeRequested)),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAdEvent.bind(this,this.onAllAdsCompleted)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdEvent.bind(this,this.onAdLoaded)),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdEvent.bind(this,this.onAdStarted)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,this.onAdEvent.bind(this,this.onAdClick)),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdEvent.bind(this,this.onAdComplete)),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdEvent.bind(this,this.onAdSkipped)),this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPaused.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,this.onAdEvent.bind(this,this.onAdResumed)),this.adsManager.addEventListener(google.ima.AdEvent.Type.VOLUME_CHANGED,this.onAdEvent.bind(this,this.onVolumeChanged)),this.adsManager.addEventListener(google.ima.AdEvent.Type.VOLUME_MUTED,this.onAdEvent.bind(this,this.onVolumeMuted)),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,this.onAdEvent.bind(this,null)),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_METADATA,this.onAdEvent.bind(this,null)),this.adsManager.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,this.onAdEvent.bind(this,null)),this.adsManager.addEventListener(google.ima.AdEvent.Type.IMPRESSION,this.onAdEvent.bind(this,null)),this.adsManager.addEventListener(google.ima.AdEvent.Type.INTERACTION,this.onAdEvent.bind(this,null)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LINEAR_CHANGED,this.onAdEvent.bind(this,null)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG,this.onAdEvent.bind(this,null)),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,this.onAdEvent.bind(this,null)),this.adsManager.addEventListener(google.ima.AdEvent.Type.MIDPOINT,this.onAdEvent.bind(this,null)),this.adsManager.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,this.onAdEvent.bind(this,null)),this.adsManager.addEventListener(google.ima.AdEvent.Type.USER_CLOSE,this.onAdEvent.bind(this,null)),this.triggerReady()}},{key:"initAdsManager",value:function(){try{this.adsManager.init(this.width,this.height,this.screenMode),this.adsManager.setVolume(this.muted_?0:this.volume_),this.adDisplayContainer.initialize()}catch(e){this.onAdError(e)}}},{key:"start",value:function(){if(this.currentAd)console.war("Ad warning: ad is already playing");else{this.hasStarted_||this.triggerHasStartedEvents();try{this.adsManager.start()}catch(e){this.onAdError(e)}}}},{key:"triggerHasStartedEvents",value:function(){this.trigger("canplay"),this.trigger("loadedmetadata"),this.trigger("volumechange"),this.trigger("firstplay"),this.trigger("play"),this.trigger("playing")}},{key:"preroll",value:function(){this.contentHasStarted_=!0,this.adsManager&&(this.initAdsManager(),this.autoplay()&&this.play())}},{key:"postroll",value:function(){this.contentCompleted_||(this.contentCompleted_=!0,this.onContentCompleted())}},{key:"resize",value:function(e){this.width=e.fullscreen?window.screen.width:e.width,this.height=e.fullscreen?window.screen.height:e.height,this.setScreenMode(e.fullscreen),this.adsManager&&(this.adsManager.resize(this.width,this.height,this.screenMode),this.trigger("resize"))}},{key:"onOptionsChanged",value:function(e){e&&(this.options_=Object.assign(this.source,e))}},{key:"onAdsLoaderError",value:function(e){this.onAdError(e,"AdsLoader")}},{key:"onAdError",value:function(e,t){var n=(t||"Ad")+" error: ",i=void 0!==e.getError?e.getError().getMessage():e.stack;console.warn("VIDEOJS: "+n+i),this.trigger("adserror")}},{key:"onAdsManagerLoaded",value:function(e){this.setAdsManager(e),this.trigger("adsready",this.adsManager.getCuePoints())}},{key:"onAdLoaded",value:function(e){this.currentAd=e.getAd();var t=0,n=0;this.currentAd.getAdPodInfo&&this.currentAd.getAdPodInfo()&&(t=this.currentAd.getAdPodInfo().getAdPosition(),n=this.currentAd.getAdPodInfo().getTotalAds()),this.trigger("adchange",{adPosition:t,totalAds:n}),this.isLinearAd()?this.onLinearAdLoaded():this.onNonLinearAdLoaded()}},{key:"onLinearAdLoaded",value:function(){this.trigger("waiting"),this.trigger("ratechange"),this.trigger("durationchange")}},{key:"onNonLinearAdLoaded",value:function(){}},{key:"onContentPauseRequested",value:function(){var e=this.currentAd&&"application/javascript"===this.currentAd.getContentType();this.trigger("linearadstarted",!e||this.source.showControlsForJSAds),this.trigger("waiting")}},{key:"onContentResumeRequested",value:function(){this.trigger("linearadended")}},{key:"onAdStarted",value:function(){this.isLinearAd()?this.onLinearAdStarted():this.onNonLinearStarted()}},{key:"onLinearAdStarted",value:function(){this.trigger("playing")}},{key:"onNonLinearStarted",value:function(){this.trigger("nonlinearadstarted")}},{key:"onAdSkipped",value:function(){this.paused()&&this.onAdResumed(),this.onAdComplete()}},{key:"onAdComplete",value:function(){this.isLinearAd()?this.onLinearAdEnded():this.onNonLinearAdEnded(),this.currentAd=null}},{key:"onLinearAdEnded",value:function(){}},{key:"onNonLinearAdEnded",value:function(){this.trigger("nonlinearadended")}},{key:"onAllAdsCompleted",value:function(){this.ended_=!0,this.trigger("ended"),this.reset()}},{key:"onAdPaused",value:function(){this.paused_=!0,this.trigger("pause")}},{key:"onAdResumed",value:function(){this.paused_=!1,this.trigger("play")}},{key:"onAdClick",value:function(){this.pause()}},{key:"onVolumeChanged",value:function(){this.volume_=this.volume()||this.volume_,this.trigger("volumechange")}},{key:"onVolumeMuted",value:function(){this.muted_=this.muted(),this.trigger("volumechange")}},{key:"onContentCompleted",value:function(){this.adsLoader&&this.adsLoader.contentComplete()}},{key:"onAdEvent",value:function(e,t){this.player_.trigger(t),"function"==typeof e&&e.call(this,t)}},{key:"isLinearAd",value:function(){return this.adsManager&&this.currentAd&&this.currentAd.isLinear()}}]),d}(e.getTech("Tech"));h.isSupported=function(){return!0},h.canPlaySource=function(e){return this.canPlayType(e)},h.canPlayType=function(e){return e&&"video/ima"===e.type},e.registerTech("Ima",h);var u=e.getComponent("Player"),c=function(t){function r(t,i){n(this,r);var s=document.createElement("div");s.id=t.id_+"_ima",s.className="vjs-ima video-js",i.src=i.adTagUrl||i.adsResponse||"placeholder",i.type="video/ima";var a=o(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,s,{controls:!1,sources:[i],techOrder:["ima"],controlBar:{imaRemainingTimeDisplay:{adLabel:i.adLabel||"Advertisement",ofLabel:i.ofLabel||"of"},children:["playToggle","volumePanel","imaRemainingTimeDisplay","progressControl","customControlSpacer","fullscreenToggle"]},children:["mediaLoader","loadingSpinner","controlBar","errorDisplay"]}));return a.resizeType=t.resizeManager?"playerresize":["resize","fullscreenchange"],a.hide(),u.players[a.id_]=null,a.imaOptions=i,a.adPosition=0,a.totalAds=0,a.adsReadyTriggered=!1,a.noPreroll=!1,a.noPostroll=!1,a.contentHasStarted_=!1,a.contentControlsDisabled=!t.controls(),a.contentPlayer=t,a.isMobile=e.browser.IS_IOS||e.browser.IS_ANDROID,a.isMobile&&a.addClass("vjs-ima-mobile"),a.setRemainingTimeVisibility(),a.trackContentEvents(),a.setTimeout((function(){a.tech_.handleLateInit_({imaPlayer:a,mediaElement:a.getContentTechElement(),width:t.currentWidth(),height:t.currentHeight(),volume:t.volume(),fullscreen:t.isFullscreen(),autoplay:t.autoplay(),muted:t.muted()})})),a.contentPlayer.ready(a.handleContentResize_.bind(a)),a}return a(r,t),i(r,[{key:"loadTech_",value:function(e,t){s(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"loadTech_",this).call(this,e,t),this.trackImaEvents()}},{key:"requestFullscreen",value:function(){this.contentPlayer.isFullscreen()||this.contentPlayer.requestFullscreen()}},{key:"exitFullscreen",value:function(){this.contentPlayer.isFullscreen()&&this.contentPlayer.exitFullscreen()}},{key:"handleTechWaiting_",value:function(){this.addClass("vjs-waiting"),this.trigger("waiting")}},{key:"reset",value:function(){this.setContentPlayerToDefault(),this.noPreroll=!1,this.noPostroll=!1,s(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"reset",this).call(this),this.handleTechAdsReady_()}},{key:"trackContentEvents",value:function(){this.on(this.contentPlayer,"seek",this.handleContentSeek_),this.on(this.contentPlayer,"seekend",this.handleContentSeekEnd_),this.on(this.contentPlayer,"durationchange",this.handleContentDurationChange_),this.on(this.contentPlayer,"timeupdate",this.handleContentTimeUpdate_),this.on(this.contentPlayer,this.resizeType,this.handleContentResize_),this.on(this.contentPlayer,"contentupdate",this.handleContentChanged_),this.on(this.contentPlayer,"readyforpreroll",this.handleContentReadyForPreroll_),this.on(this.contentPlayer,"readyforpostroll",this.handleContentReadyForPostroll_)}},{key:"trackImaEvents",value:function(){this.on(this.tech_,"adsready",this.handleTechAdsReady_),this.on(this.tech_,"adchange",this.handleTechAdChange_),this.on(this.tech_,"linearadstarted",this.handleTechLinearAdStarted_),this.on(this.tech_,"linearadended",this.handleTechLinearAdEnded_),this.on(this.tech_,"nonlinearadstarted",this.handleTechNonLinearAdStarted_),this.on(this.tech_,"nonlinearadended",this.handleTechNonLinearAdEnded_),this.on(this.tech_,"adserror",this.handleTechAdsError_)}},{key:"setContentPlayerToDefault",value:function(){this.handleTechLinearAdEnded_(),this.handleTechNonLinearAdEnded_()}},{key:"getContentTechElement",value:function(){return"Html5"!==this.contentPlayer.techName_&&(this.contentPlayer.tech_.el_.canPlayType||(this.contentPlayer.tech_.el_.canPlayType=function(){return!1}),this.contentPlayer.tech_.el_.pause||(this.contentPlayer.tech_.el_.pause=function(){return!1}),this.contentPlayer.tech_.el_.play||(this.contentPlayer.tech_.el_.play=function(){return!1})),this.contentPlayer.tech_.el_}},{key:"setRemainingTimeVisibility",value:function(){!1!==this.imaOptions.showCountdown?this.controlBar.imaRemainingTimeDisplay.show():this.controlBar.imaRemainingTimeDisplay.hide()}},{key:"updateOptions",value:function(e){this.imaOptions&&e&&Object.assign(this.imaOptions,e),this.contentPlayer.ads.contentSrc=""}},{key:"resumeContent",value:function(){this.contentHasStarted_&&!this.contentEnded&&this.contentPlayer.play()}},{key:"pauseContent",value:function(){this.contentHasStarted_&&!this.contentEnded&&this.contentPlayer.pause()}},{key:"setContentControls",value:function(e){this.contentControlsDisabled||this.contentPlayer.controls(e)}},{key:"skipLinearAdMode",value:function(){this.contentPlayer.ads.isWaitingForAdBreak()&&this.contentPlayer.ads.skipLinearAdMode()}},{key:"handleContentReadyForPreroll_",value:function(){this.contentHasStarted_=!0,this.noPreroll&&this.skipLinearAdMode(),this.techCall_("preroll"),this.noPreroll=!0}},{key:"handleContentReadyForPostroll_",value:function(){this.noPostroll&&this.skipLinearAdMode(),this.contentEnded||(this.contentEnded=!0,this.techCall_("postroll")),this.noPostroll=!0}},{key:"handleContentChanged_",value:function(){this.setContentPlayerToDefault(),this.contentEnded=!1,this.noPreroll=!1,this.noPostroll=!1,this.adsReadyTriggered=!1,this.imaOptions.contentMediaElement=this.getContentTechElement(),this.src(this.imaOptions),this.setRemainingTimeVisibility()}},{key:"handleContentTimeUpdate_",value:function(){var e=this;this.ready((function(){e.tech_.contentTracker.previousTime=e.tech_.contentTracker.currentTime,e.tech_.contentTracker.currentTime=e.contentPlayer.currentTime()}))}},{key:"handleContentResize_",value:function(){this.isFullscreen(this.contentPlayer.isFullscreen()),this.techCall_("resize",{width:this.contentPlayer.currentWidth(),height:this.contentPlayer.currentHeight(),fullscreen:this.isFullscreen()})}},{key:"handleContentDurationChange_",value:function(){var e=this;this.ready((function(){e.tech_.contentTracker.duration=e.contentPlayer.duration()}))}},{key:"handleContentSeek_",value:function(){var e=this;this.ready((function(){e.tech_.contentTracker.seeking=!0}))}},{key:"handleContentSeekEnd_",value:function(){var e=this;this.ready((function(){e.tech_.contentTracker.seeking=!1}))}},{key:"handleTechAdsReady_",value:function(e,t){this.noPreroll=!t,this.noPostroll=!t||!t.includes(-1),this.adsReadyTriggered||(this.adsReadyTriggered=!0,this.contentPlayer.trigger("adsready"))}},{key:"handleTechAdChange_",value:function(e,t){this.adPosition=t.adPosition,this.totalAds=t.totalAds}},{key:"handleTechLinearAdStarted_",value:function(e,t){this.contentPlayer.ads.inAdBreak()||(this.volume(this.contentPlayer.volume()),this.muted(this.contentPlayer.muted()),this.contentPlayer.ads.startLinearAdMode(),this.contentPlayer.trigger("ads-ad-started"),this.setContentControls(!1),this.controls(t),this.pauseContent(),this.show())}},{key:"handleTechLinearAdEnded_",value:function(){this.contentPlayer.ads.inAdBreak()?(this.contentPlayer.volume(this.volume()),this.contentPlayer.muted(this.muted()),this.contentPlayer.ads.endLinearAdMode()):this.skipLinearAdMode(),this.controls(!1),this.setContentControls(!0),this.hide(),this.resumeContent()}},{key:"handleTechNonLinearAdStarted_",value:function(){this.controls(!1),this.contentPlayer.addClass("non-linear-ad"),this.show()}},{key:"handleTechNonLinearAdEnded_",value:function(){this.contentPlayer.removeClass("non-linear-ad"),this.hide()}},{key:"handleTechAdsError_",value:function(){this.hide(),this.removeClass("waiting"),this.reset()}}]),r}(u);e.registerComponent("imaPlayer",c),e.registerPlugin("ima",(function(e){this.ads?("function"==typeof this.ads&&this.ads(Object.assign({debug:e.debug||!1,timeout:e.timeout||5e3},e.contribAdsSettings||{})),this.ima=this.addChild("imaPlayer",e)):console.error("ima-player error: contrib-ads must be registered on player.")}))}));
